<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æŠ–éŸ³å®æ—¶çƒ­æœæ¦œ</title>
    <style>
        /* --- 1. å…¨å±€åŸºç¡€æ ·å¼ (Reset & Base) --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç‚¹å‡»é«˜äº® */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* ç´«è‰²æ¸å˜èƒŒæ™¯ */
            min-height: 100vh;
            color: #333;
            padding-bottom: 40px;
        }

        /* --- 2. å®¹å™¨å¸ƒå±€ (Container) --- */
        .container {
            max-width: 600px; /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œåœ¨å¤§å±ä¸Šä¹Ÿåƒä¸ªAPP */
            margin: 0 auto;
            padding: 20px 16px;
        }

        /* --- 3. å¤´éƒ¨æ ·å¼ (Header) --- */
        header {
            text-align: center;
            margin-bottom: 24px;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .update-time {
            font-size: 12px;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
        }

        /* --- 4. åˆ—è¡¨ä¸å¡ç‰‡æ ·å¼ (Cards & Glassmorphism) --- */
        .hot-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .card {
            /* æ¯›ç»ç’ƒæ ¸å¿ƒä»£ç  */
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .card:active {
            transform: scale(0.98); /* ç‚¹å‡»æ—¶çš„å¾®ç¼©æ•ˆæœ */
            background: rgba(255, 255, 255, 0.95);
        }

        /* --- 5. å¡ç‰‡å†…éƒ¨å…ƒç´  (Inner Layout) --- */
        
        /* æ’å (å·¦ä¾§) */
        .rank {
            font-size: 18px;
            font-weight: 800;
            min-width: 30px;
            text-align: center;
            margin-right: 12px;
            font-style: italic;
            color: #999;
        }

        /* å‰ä¸‰åé«˜äº®é¢œè‰² */
        .rank-1 { color: #FF4500; font-size: 22px; } /* å† å†›çº¢ */
        .rank-2 { color: #FF8C00; font-size: 20px; } /* äºšå†›æ©™ */
        .rank-3 { color: #FFD700; font-size: 20px; } /* å­£å†›é»„ */

        /* æ–‡æœ¬å†…å®¹ (ä¸­é—´) */
        .content {
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
            margin-right: 12px;
        }

        .title {
            font-size: 15px;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 6px;
            color: #222;
            
            /* è¶…è¿‡ä¸¤è¡Œæ˜¾ç¤ºçœç•¥å· */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .hot-value {
            font-size: 12px;
            color: #888;
            display: flex;
            align-items: center;
        }

        .hot-value::before {
            content: 'ğŸ”¥';
            margin-right: 4px;
            font-size: 10px;
        }

        /* å°é¢å›¾ (å³ä¾§) */
        .cover {
            width: 80px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            background-color: #f0f0f0;
            flex-shrink: 0; /* é˜²æ­¢å›¾ç‰‡è¢«å‹ç¼© */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* åŠ è½½ä¸­/é”™è¯¯æç¤º */
        #loading {
            text-align: center;
            color: white;
            margin-top: 50px;
        }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>æŠ–éŸ³å®æ—¶çƒ­æœ ğŸ”¥</h1>
            <span class="update-time" id="update-time">åŠ è½½ä¸­...</span>
        </header>

        <div id="loading">æ­£åœ¨è·å–æœ€æ–°çƒ­æœæ•°æ®...</div>
        <div class="hot-list" id="hot-list">
            </div>
    </div>

    <script>
        // --- æ ¸å¿ƒé€»è¾‘ ---

        // 1. æ ¼å¼åŒ–çƒ­åº¦æ•°å€¼ (ä¾‹å¦‚: 1234567 -> 123.4w)
        function formatHotValue(value) {
            const num = parseInt(value);
            if (num > 10000) {
                return (num / 10000).toFixed(1) + 'w';
            }
            return num;
        }

        // 2. æ ¼å¼åŒ–æ—¶é—´
        function formatTime(isoString) {
            const date = new Date(isoString);
            return date.toLocaleString('zh-CN', {
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // 3. ä¸»å‡½æ•°ï¼šåŠ è½½æ•°æ®å¹¶æ¸²æŸ“
        async function loadHotData() {
            try {
                // è¯»å–åŒç›®å½•ä¸‹çš„ hot.json æ–‡ä»¶
                // åŠ ä¸Šæ—¶é—´æˆ³å‚æ•°é˜²æ­¢æµè§ˆå™¨ç¼“å­˜æ—§æ•°æ®
                const response = await fetch('./hot.json?t=' + new Date().getTime());
                
                if (!response.ok) {
                    throw new Error("HTTP error " + response.status);
                }

                const data = await response.json();
                renderPage(data);
                
            } catch (error) {
                console.error("åŠ è½½å¤±è´¥:", error);
                document.getElementById('loading').innerHTML = 
                    "âš ï¸ æ•°æ®åŠ è½½å¤±è´¥<br>è¯·æ£€æŸ¥ hot.json æ˜¯å¦å­˜åœ¨";
            }
        }

        // 4. æ¸²æŸ“é¡µé¢ DOM
        function renderPage(data) {
            const listContainer = document.getElementById('hot-list');
            const timeElement = document.getElementById('update-time');
            const loadingElement = document.getElementById('loading');

            // æ›´æ–°æ—¶é—´
            if (data.update_time) {
                timeElement.textContent = "æ›´æ–°äº: " + formatTime(data.update_time);
            }

            // æ¸…ç©ºåˆ—è¡¨å¹¶éšè—åŠ è½½æç¤º
            listContainer.innerHTML = '';
            loadingElement.style.display = 'none';

            // éå†åˆ—è¡¨ç”Ÿæˆå¡ç‰‡
            data.list.forEach((item, index) => {
                // åˆ›å»ºå¡ç‰‡é“¾æ¥
                const card = document.createElement('a');
                card.className = 'card';
                card.href = item.url;
                card.target = "_blank"; // åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€

                // è®¡ç®—æ’åæ ·å¼ (å‰ä¸‰åç‰¹æ®Šæ ·å¼)
                const rankClass = index < 3 ? `rank-${index + 1}` : '';

                // æ„å»º HTML ç»“æ„
                card.innerHTML = `
                    <div class="rank ${rankClass}">${index + 1}</div>
                    <div class="content">
                        <div class="title">${item.title}</div>
                        <div class="hot-value">${formatHotValue(item.hot_value)} çƒ­åº¦</div>
                    </div>
                    ${item.extra && item.extra.cover ? 
                        `<img class="cover" src="${item.extra.cover}" alt="cover" onerror="this.style.display='none'">` : ''}
                `;

                listContainer.appendChild(card);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        window.addEventListener('DOMContentLoaded', loadHotData);

    </script>
</body>
</html>